#!/bin/bash

# æ€§èƒ½åˆ†æåŠ©æ‰‹ - å¸®åŠ©ä½ é€‰æ‹©åˆé€‚çš„å·¥å…·
# ä½¿ç”¨æ–¹æ³•: ./perf_helper.sh

clear

cat << 'EOF'
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘          tcmalloc æ€§èƒ½åˆ†æå·¥å…·åŠ©æ‰‹                            â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ä½ æƒ³åšä»€ä¹ˆï¼Ÿ

  1ï¸âƒ£  å¿«é€Ÿæ€§èƒ½æ£€æŸ¥ï¼ˆ1-2åˆ†é’Ÿï¼‰           ğŸš€ æ¨èæ–°æ‰‹
  2ï¸âƒ£  å®Œæ•´æ€§èƒ½åˆ†æï¼ˆ10åˆ†é’Ÿï¼‰            ğŸ“Š æ¨èæ·±å…¥åˆ†æ
  3ï¸âƒ£  æŸ¥çœ‹å·²æœ‰çš„åˆ†æç»“æœ                 ğŸ‘ï¸  æŸ¥çœ‹å†å²ç»“æœ
  4ï¸âƒ£  æ€§èƒ½å¯¹æ¯”æµ‹è¯•                       âš–ï¸  å¯¹æ¯”ä¼˜åŒ–æ•ˆæœ
  5ï¸âƒ£  æŸ¥çœ‹ä½¿ç”¨æ–‡æ¡£                       ğŸ“š å­¦ä¹ å¦‚ä½•ä½¿ç”¨
  6ï¸âƒ£  ç¼–è¯‘è°ƒè¯•ç‰ˆæœ¬                       ğŸ”¨ å•ç‹¬ç¼–è¯‘
  
  0ï¸âƒ£  é€€å‡º

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EOF

read -p "è¯·è¾“å…¥é€‰é¡¹ [0-6]: " choice

case $choice in
    1)
        echo ""
        echo "ğŸš€ å¯åŠ¨å¿«é€Ÿæ€§èƒ½æ£€æŸ¥..."
        echo "è¿™å°†æ£€æŸ¥å†…å­˜æ³„æ¼å’ŒåŸºæœ¬æ€§èƒ½æŒ‡æ ‡"
        echo ""
        read -p "æŒ‰ Enter ç»§ç»­..."
        ./quick_perf.sh
        ;;
    2)
        echo ""
        echo "ğŸ“Š å¯åŠ¨å®Œæ•´æ€§èƒ½åˆ†æ..."
        echo "è¿™å°†ä½¿ç”¨ Valgrind è¿›è¡Œå…¨é¢åˆ†æï¼Œéœ€è¦çº¦ 10 åˆ†é’Ÿ"
        echo ""
        read -p "æŒ‰ Enter ç»§ç»­..."
        ./valgrind_analysis.sh
        ;;
    3)
        echo ""
        echo "ğŸ‘ï¸  æ‰“å¼€ç»“æœæŸ¥çœ‹å™¨..."
        echo ""
        ./view_results.sh
        ;;
    4)
        echo ""
        echo "âš–ï¸  å¯åŠ¨æ€§èƒ½å¯¹æ¯”æµ‹è¯•..."
        echo "è¿™å°†å¯¹æ¯”ä½ çš„ tcmalloc ä¸ç³»ç»Ÿ malloc çš„æ€§èƒ½"
        echo ""
        read -p "æŒ‰ Enter ç»§ç»­..."
        ./compare_perf.sh
        ;;
    5)
        clear
        cat << 'DOCEOF'
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“š æ–‡æ¡£æŒ‡å—                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

å¯ç”¨çš„æ–‡æ¡£ï¼š

1. README_æ€§èƒ½åˆ†æ.md     â­ æ€»è§ˆå’Œå¿«é€Ÿå…¥é—¨
2. å¿«é€Ÿå¼€å§‹.md             ğŸš€ 3æ­¥å¼€å§‹ä½¿ç”¨
3. æ€§èƒ½åˆ†ææŒ‡å—.md         ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜
4. å·¥å…·è¯´æ˜.md             ğŸ“‹ å·¥å…·å’Œå‘½ä»¤é€ŸæŸ¥

æ¨èé˜…è¯»é¡ºåºï¼š
  æ–°æ‰‹: README_æ€§èƒ½åˆ†æ.md â†’ å¿«é€Ÿå¼€å§‹.md
  è¿›é˜¶: æ€§èƒ½åˆ†ææŒ‡å—.md â†’ å·¥å…·è¯´æ˜.md

æŸ¥çœ‹æ–‡æ¡£çš„å‘½ä»¤ï¼š
  cat README_æ€§èƒ½åˆ†æ.md
  less å¿«é€Ÿå¼€å§‹.md

DOCEOF
        echo ""
        read -p "æŒ‰ Enter æ‰“å¼€æ€»è§ˆæ–‡æ¡£..." dummy
        cat README_æ€§èƒ½åˆ†æ.md | less
        ;;
    6)
        echo ""
        echo "ğŸ”¨ ç¼–è¯‘è°ƒè¯•ç‰ˆæœ¬..."
        echo ""
        make bench_debug
        echo ""
        echo "âœ… ç¼–è¯‘å®Œæˆï¼"
        echo "å¯æ‰§è¡Œæ–‡ä»¶: ./bench_debug"
        ;;
    0)
        echo ""
        echo "ğŸ‘‹ å†è§ï¼"
        exit 0
        ;;
    *)
        echo ""
        echo "âŒ æ— æ•ˆé€‰é¡¹"
        exit 1
        ;;
esac

echo ""
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "ğŸ’¡ æç¤º: é‡æ–°è¿è¡Œ ./perf_helper.sh å¯ä»¥é€‰æ‹©å…¶ä»–é€‰é¡¹"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
